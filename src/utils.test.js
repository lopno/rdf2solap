const { geojsonType } = require("@turf/invariant");

const turf = require("@turf/turf");

const utils = require("./utils");

describe("utils", () => {
  describe("getSpatialValues", () => {
    it("should generate a turf polygon for a string starting with POLYGON", () => {
      const value =
        "POLYGON((11.207127502385 55.339170418978,11.166807906451 55.35464774943,11.142090674291 55.33148493334,11.134028304465 55.358497194179,11.208272334498 55.365204348518,11.268146376147 55.299858706908,11.142504449951 55.330607261612,11.183725704137 55.325451440906,11.207127502385 55.339170418978))";
      const result = utils.getSpatialValues(value);
      expect(result.geometry.type).toBe("Polygon");
    });
    it("should generate a turf multipolygon for a string starting with MULTIPOLYGON", () => {
      const value =
        "MULTIPOLYGON(((12.590991549796 55.672753169651,12.587842399301 55.674579890641,12.591677348271 55.676297275048,12.593953118444 55.67459434002,12.590991549796 55.672753169651)),((12.602218262785 55.682993990796,12.600964402248 55.683605939151,12.60136260794 55.684062542314,12.60360197338 55.683441954223,12.602513800552 55.682184580672,12.600250313959 55.68278976254,12.602218262785 55.682993990796)),((12.611092931598 55.666989083656,12.600458134559 55.664749971299,12.601188615015 55.667606373542,12.591293170909 55.672601634385,12.601082344769 55.676660197994,12.596758870524 55.678898572229,12.597817303038 55.680048423578,12.607245391737 55.677675590306,12.603821569619 55.674843111233,12.601329856393 55.676531178202,12.602460772009 55.674485209677,12.604286235786 55.67474492864,12.608926789629 55.678619809682,12.60978738332 55.68380898073,12.604624577821 55.683991785734,12.603868910335 55.688760907022,12.607817989138 55.689236007489,12.607814237407 55.68759824225,12.609752531387 55.684033365902,12.608182059944 55.697298046501,12.612677686147 55.695297275406,12.613168883022 55.696156280274,12.609955919432 55.696817383648,12.609530722577 55.697765325907,12.629491187132 55.69743999085,12.625175525203 55.69002624962,12.61366957416 55.687113547034,12.632858474099 55.69053434629,12.635940362627 55.687759255759,12.620244570292 55.680092024774,12.632466776313 55.671212246145,12.624911651181 55.680513351465,12.635593712024 55.685037042011,12.639734269009 55.68040093293,12.632994616933 55.675706099071,12.644668289714 55.679161747419,12.645730240067 55.670899388396,12.636550958956 55.670393568472,12.64492918664 55.670580339638,12.641788779902 55.667061560506,12.643424090285 55.669913986431,12.639677160755 55.669730433508,12.640912624031 55.667042354803,12.636883430844 55.666807306578,12.632967926789 55.671016297676,12.611092931598 55.666989083656)),((12.60582887363 55.678371057056,12.600737934515 55.679562823645,12.604212499974 55.683739266788,12.607942795045 55.682903111337,12.60582887363 55.678371057056)),((12.60168808138 55.681229350206,12.599201511397 55.681893398454,12.599896250387 55.682721118796,12.602399956187 55.682052597289,12.60168808138 55.681229350206)),((12.599396629375 55.681678789778,12.601573916996 55.68109728561,12.600592050411 55.67996302033,12.598849302623 55.680439228554,12.599396629375 55.681678789778)),((12.596655401642 55.678387272072,12.598442542672 55.677717814467,12.594090465209 55.674813042599,12.59197806228 55.676376676056,12.596655401642 55.678387272072)),((12.601675900381 55.687079650021,12.601705754955 55.687061598682,12.601673792903 55.687044643568,12.601643938327 55.687062694899,12.601675900381 55.687079650021)),((12.6020616693 55.688996808911,12.60199493665 55.688998139572,12.603082681471 55.68899549898,12.6020616693 55.688996808911)),((12.603849830079 55.688968550989,12.604383421517 55.688998188186,12.605066466234 55.689285093807,12.60438368019 55.688990627393,12.603849830079 55.688968550989)),((12.605270490282 55.689370993104,12.606661541294 55.689558933978,12.607894597437 55.689226110563,12.606659082513 55.689552981717,12.605270490282 55.689370993104)),((12.612809853164 55.703905207674,12.614732378477 55.703714136504,12.616205717594 55.701734117466,12.616045902103 55.698486270088,12.611642010072 55.70365716448,12.612753531419 55.707811962298,12.612809853164 55.703905207674)),((12.731499616711 55.704152035039,12.734133795106 55.703401931953,12.733857355512 55.702751568181,12.729125296376 55.703289496265,12.731499616711 55.704152035039)))";
      expect(utils.getSpatialValues(value).geometry.type).toBe("MultiPolygon");
    });
  });
});
